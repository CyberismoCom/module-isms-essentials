selectAll.

ismsa_closestHome(Card, Ancestor) :-
    field(Ancestor, "cardType", "ismsa/cardTypes/moduleHome"),
    ancestor(Card, Ancestor),
    not field(MiddleAncestor, "cardType", "ismsa/cardTypes/moduleHome") :
    ancestor(MiddleAncestor, Ancestor),
    ancestor(Card, MiddleAncestor).

result(Risk) :-
    ismsa_closestHome(Risk, Home),
    ismsa_closestHome({{cardKey}}, Home),
    field(Risk, "cardType", "ismsa/cardTypes/risk"),
    link(Asset, Risk, "ismsa/linkTypes/presentsRisk"),
    field(Asset, "cardType", "{{assetType}}").

orderBy("title", "ASC").